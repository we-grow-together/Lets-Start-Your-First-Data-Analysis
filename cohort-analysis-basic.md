# 동일한 경험을 가진 사람들을 묶어서 분석하자. 코호트 분석, 이렇게 하면 된다!

## Hook
열심히 마케팅 캠페인을 기획하고 운영까지 했는데 효과를 알 수 없어서 답답한 적 없으세요? **retention이 중요하다고는 하는데 매달 우리 서비스의 retention이 어떻게 변화하고 있는지 정확하게 알고 계신가요? (이거 뺄지 말지 정해야 한다.)** 초점이 맞지 않아 뿌옇게만 보이던 데이터를 선명하게 볼 수 있게 해 주는 코호트 분석에 대해서 알아 봅시다.

## Intro
안녕하세요, Dano입니다. 이번 시간에는 사용자 행동 데이터를 분석할 때 여러분들의 시력을 높여 줄 코호트 분석에 대해 알아 봅시다. 대부분의 경우 코호트란 단어를 처음 들으셨거나 듣기는 했는데 정화하게 무슨 뜻인지는 모르실 겁니다. 자, 복잡한 이야기는 다 빼고 바로 예시를 가지고 시작합시다.

## 다시 돌아온 번화가의 화장품 매장
지난 시간에 사례로 다뤘던 번화가의 화장품 매장으로 다시 돌아가 봅시다. 아직 안 보신 분은 화면 왼쪽 상단의 i 마크를 참조하세요.

그 사장님에게 연락이 왔어요. "지난 달에 AA라는 해외 화장품 브랜드랑 팝업 스토어를 열었어요. 행사는 잘 끝났고 저번에 배운 퍼널 분석으로 제가 분석을 해 봤는데... 음... 잘 모르겠어요... 좀 도와 주세요."

그러면서 사장님이 표 하나를 보여 주셨습니다. 11월 매출과 10월 매출을 정리한 표인데요, 한번 같이 살펴 보시죠. 11월 3주차에 팝업 매장을 열었다고 합니다. 그런데 11월 매출에 얼마나 기여를 했는지, 다른 지표들에 어떤 영향을 미쳤는지 알기 어렵습니다. 10월 매출이 11월 매출보다 상대적으로 높기는 한데 11월 매출이 팝업 스토어 때문에 떨어졌다고 할 만한 별다른 근거도 없고. 객단가는 오히려 11월이 10월보다 높아서 어떤 결론을 내기가 어렵습니다. 그렇지 않나요?

많은 스타트업에서 흔히 보는 광경입니다. 이렇게 합리적 추측조차 불가능한 수준의 데이터를 놓고 갑론을박을 합니다. 의미 있는 결론이 나올리가 없겠죠? 게다가 이런 자료로 바탕으로 만든 가설은 근거가 없는 소설에 불과합니다. 그러면 우리는 어떻게 해야 할까요?

자, 확인을 해 보니까 팝업 스토어는 11월 3번째 주에 일주일 동안 열었다고 합니다. 그리고 매장에 내방객 수를 세는 디지털 솔루션을 도입해서 우리가 원하는 기간의 내방객 수를 얻을 수 있다고 합니다. 어, 그러면 방법이 보입니다. 

주 단위로 데이터를 비교하면 팝업 스토어 운영 기간의 데이터, 즉 11월 3주차의 데이터와 다른 주들의 데이터를 비교할 수 있습니다. 비교할 데이터로는 팝업 스토어를 운영하기 바로 전주인 11월 두번째 주와 그 다음 주인 11월 네번째 주의 데이터를 사용하고 추가적으로 한달 전의 같은 주인 10월 세번째 주의 데이터와도 비교해 봅시다. 즉 팝업 스토어를 운영할 때 방문한 고객들의 데이터를 3개의 다른 데이터와 비교해서 어떤 차이가 있는지를 알아 보는 겁니다.

먼저 수집된 데이터를 이용해서 퍼널을 표로 만들어 봅시다. 그리고 총매출, 상대적 매출, 객단가 컬럼을 추가해서 정리합니다. 자 이제 같이 살펴 보시죠.

먼저 퍼널에서 내방객 기준 구매 전환율을 봅시다. 팝업 스토어를 운영했던 주의 구매 전환율은 다른 주의 전환율이 10 ~ 11%인데 비해서 15%로 꽤 높다는 것을 알 수 있습니다. 매출은 지난 달 매출인 10월 3주차보다는 늘었고 직전이나 직후 주의 매출과 비슷한 수준이라는 것을 알 수 있습니다. (표에서는 팝업 스토어를 운영했던 주의 매출을 1로 했을 때 다른 주의 매출들을 상대적인 값으로 표시했습니다.) 그런데 평균 객단가를 보면 팝업 스토어를 운영한 주의 평균 객단가가 대조군의 절반 정도라는 것을 확인할 수 있습니다.

팝업 스토어 운영 시의 변화에 대해서 새롭게 알게 된 사실을 간단히 정리해 봅시다.
1) 내방객의 수가 늘었다. 11월 2주차 대비 60% 증가했습니다.
2) 내방객 기준 구매 전환율이 15%에 이른다. 대조군은  10 ~ 11%대입니다.
3) 매출은 큰 변화를 파악하기 어렵다.
4) 평균 객단가는 절반 수준이다. 11월 2주차 대비 48% 수준에 불과합니다.

아까 사장님이 보여준 표, 즉 10월, 11월 2개의 월 데이터를 비교했을 때보다 훨씬 더 많은 사실을 알 수 있지 않나요? 마치 뿌옇게 보이지 않았던 영상의 초점을 맞추니 명확하게 보이는 것처럼 우리가 알고 싶은 데이터를 얻으려면 해당 데이터의 해상도를 높여야 합니다. 이런 정보들을 바탕으로 새로운 가설을 세워서 팝업 스토어의 성과나 의미를 분석할 수 있습니다. 하지만 오늘은 여기까지만.

## 코호트 분석이란?
우리가 방금 한 게 바로 코호트 분석입니다. 뭔가 특별한 걸 하지 않았죠? 자, 이제 어떻게 했는지 다시 한번 살펴 봅시다.

먼저 팝업 스토어를 운영했을 때의 데이터를 찾아 봤습니다. 일주일 동안 운영했기 때문에 7일 간의 데이터를 모았고 그에 맞게 비교할 데이터들도 일주일 간의 데이터로 준비했습니다. 즉 주 단위로 데이터를 잘라서 서로 비교한 겁니다. 그렇게 해서 11월 2번째 주, 3번째 주, 4번째 주의 데이터를 구했고 거기에 추가적으로 월의 특정 기간마다 반복되는 영향이 있을 수 있기 때문에 지난 달 같은 주의 데이터인 10월 3번째 주의 데이터를 포함시켰습니다. 이 데이터들은 '특정 주에 매장을 방문한 사용자군'의 행동 데이터입니다. 이 사용자군에 대해서 지난 시간에 배운 퍼널 분석을 했고 매출과 객단가 분석을 했습니다. 한달 단위로 뭉뚱그려서 볼 때보다 훨씬 더 구체적이고 명확하게 우리가 구하고자 하는 이벤트의 결과를 알아 볼 수 있었습니다.

### 코호트란?
코호트는 '동일 기간에 동일한 이벤트를 경험을 한 사람들'의 집합을 말합니다. 여기서 **동일한 기간**과 **동일한 경험**이라는 두가지 조건이 모두 중요합니다.

'성서 초등학교 졸업생'은 코호트일까요? 아닐까요? 이 학교의 30년 전의 졸업생과 작년 졸업생은 동일한 기간에 학교에 다니지 않았습니다. 그러면 '성서 초등학교 2002년 졸업생'은 어떨까요? 코호트라고 부르기에 적합합니다. 해당 그룹은 입학때부터 2002년 졸업할 때까지 동일한 기간에 동일한 경험을 했을 가능성이 높습니다. 다만 여기서 잊지 말아야 할 점은 우리가 해당 연도의 졸업생과 다른 연도의 졸업생들을 비교하려고 할 때에만 코호트로서의 의미가 있다는 겁니다. 즉 코호트는 반드시 비교를 전제로 합니다. 연도로 코호트를 구분한다는 건 연도로 비교했을 때 우리가 원하는 데이터를 구할 수 있다는 말입니다.

그리고 코호트에 속한 사람들은 반드시 **동일한 경험**을 공유해야 합니다. 이 전제가 맞지 않으면 코호트 분석의 의미가 사라집니다. 예를 들어서, 팝업 스토어를 운영한 7일 동안 앞의 2일은 준비가 덜 되서 서비스가 엉망진창이었다고 가정해 봅시다. 그래서 고객들의 불만이 아주 높았고 구매율도 낮았던 반면, 나머지 5일은 문제를 해결해서 잘 운영했다면 앞의 2일은 버리고 뒤의 5일에 대해서 코호트를 만들어서 분석해야지, 그냥 통으로 7일짜리 코호트로 분석해서는 안되겠죠?

### 데이터의 해상도
코호트 분석은 뭉뚱그려서 볼 때는 보이지 않던 데이터들을 보다 더 명확하게 보여줍니다. 마치 현미경의 해상도 같은 겁니다. 해상도가 높아질수록 더 정확한 분석이 가능하겠죠? 다만 코호트를 세분화하면 할수록 데이터의 수집량도 많아지고 그만큼 분석도 어려워 지게 됩니다. 그래서 수준에 맞는 적당한 해상도를 선택하는 것이 중요합니다. 제 몸무게의 변화를 측정하려고 하는데 최소 단위가 100kg인 화물차용 저울을 사용하거나 요리할 때 사용하는 미니 저울을 사용하면 안되겠죠?

### 세그먼트와의 차이
혹시 세그먼트라는 말을 들어 보셨나요? 세그먼트는 말 그대로 고객을 나눴다는 의미입니다. 같은 세그먼트에 속한 사람들은 하나 이상의 일정한 속성을 공유한다는 의미입니다. 예를 들어 신용카드로 결제한 고객을 찾고 싶다면 전체 구매 고객 중에서 신용카드로 결제한 사람과 그렇지 않은 사람을 나누는 것을 의미합니다. 물론 우리가 관심 있는 것은 신용카드로 결제한 고객들이지만 항상 전체에서 어떤 기준으로 나눠서 우리가 원하는 것을 구한다고 생각하시면 됩니다. 50만원 이상 구매한 고객에 대해 알아 보고 싶다면 마찬가지로 전체 구매 고객 중에서 50만원 이상 구매한 고객과 나머지 고객을 나눈다는 것을 의미합니다.

디지털 서비스에서는 주로 어떤 국가의 접속자들이 우리 서비스를 이용하는지를 분석할 때 국가별 또는 한국 vs 해외' 이렇게 세그먼트를 나눕니다. 이런 접속 국가와 같은 속성은 '동일한 경험'이라고 부를 수 없잖아요? 성별, 나이도 그렇죠. 그래서 demographic 데이터라고 하는 것들은 모두 세그먼트를 나누는 속성으로 많이 사용해 왔습니다.

저는 머릿 속에서, 코호트는 '동일한 기간에 동일한 경험을 한 사람들끼리 묶었구나'라고 생각하고 세그먼트는 전체 고객을 '특정 기준으로 나눴구나'라고 생각합니다. 저는 이렇게 외웠습니다. 여러분들은 각자의 방법을 찾아 보세요.

팝업 스토어를 방문해서 구매한 고객을 결제 방법으로 구분한다면 현금 (상품권 포함), 신용카드, 기타 (포인트 결제 등) 등 3가지로 구분할 수 있습니다. 이때 우리가 팝업 스토어를 운영한 주에 방문한 고객을 하나의 코호트로 만들면 이 코호트를 결제 방법에 따라 3개의 세그먼트로 나눠서 추가적인 분석을 할 수 있습니다. 또는 그들을 구매 금액에 따라 A,B,C,D 4개 등급으로 나눠서 4개의 세그먼트를 만들 수도 있습니다. 이렇게 추가적으로 나눈 세그먼트들의 객단가를 살펴 보거나 재구매율을 비교해 보면 고객에 대해서 더 많은 정보를 얻을 수 있을 겁니다.

둘을 구분하지 않고 섞어서사용하는 이상한(?) 솔루션들도 있으니 참고하세요. 그건 그게 이상한 겁니다. 원칙적으로 코호트는 동일한 기간에 동일한 이벤트를 경험한 사람들의 집합이고 세그먼트는 하나 이상의 속성을 공유한 사람들의 집합입니다. 굳이 말하자면 세그먼트가 더 넓은 의미로, 코호트가 더 좁은 의미로 사용된다고 할 수 있습니다. 

반대로 특정 세그먼트를 정의한 다음 그 세그먼트를 코호트로 나눌 수도 있습니다. 지난 달 전체 고객 중에 신용카드로 결제한 사람들을 골라서 '신용카드 결제 고객'이라는 세그먼트를 정의합니다. 그런 다음 해당 세그먼트에 대해서 11월 주차별 코호트로 나눠서 볼 수도 있습니다. 11월에 신용카드로 결제한 고객 중 특정 주차에 방문해서 구매한 사람 (각각 11월 1주차, 2주차, 3주차, 4주차에 구매한 고객)들의 결제 금액이나 구매건수 등을 비교해 볼 수 있습니다.

### 코호트는 상관 관계를 보여줄 뿐.
위의 예에서 다른 주 단위 코호트처럼, 일 단위, 월 단위 코호트도 많이 사용합니다.

혹시 지난 '퍼널 분석의 기본' 영상에서 퍼널 분석의 활용 3번째'를 기억하시나요? '특정 사건의 임팩트를 측정'할 때 사용한다고 했습니다. 우리가 위의 사례에서 사용한 것도 이에 해당합니다. 그 때 '해석에 있어서 가장 많은 논쟁을 불러 일으킨다'고 했던 것도 기억하시나요? 그래서 가급적이면 A/B 테스트를 추천한다고 설명했었는데 이번 화장품 매장 사례의 경우 오프라인 매장이다 보니 A/B 테스트를 한다는 게 사실 상 불가능하기 때문에 어쩔 수 없습니다. 그래서 전후의 코호트와 비교하고 지난 달의 코호트까지 비교했습니다. 사실 문제는 결과가 조금 좋게 나왔을 때 해석이 어렵다는데 있습니다. 게다가 많은 경우 사람들은 '답정너'입니다. 주의합시다. 

이번에는 특정 이벤트를 1주일 동안 진행했기 때문에 해당 코호트가 특정 주의 코호트와 같아서 2,3번 케이스 모두에 해당합니다만 우리 목적은 팝업 스토어의 임팩트니까 3번에 해당한다고 봐야겠죠?

게다가 큰 회사에서는 여러개의 캠페인이 동시에 실행되고 있어서 어떤 캠페인이 얼마 만큼의 기여를 했는지 파악하기 어렵습니다.

이커머스에서의 경우 쿠폰 디스카운트나 특정 링크를 통해서 들어와야 구입할 수 있는 특별 상품 등이 가장 귀인하기 쉽습니다. 해당 쿠폰 사용 여부와 해당 상품의 구매 여부만 판별하면 되니까요.

## 코호트 분석의 활용
코호트 분석은 특정 사용자군의 행동이 다른 비교군에 비해 어떻게 다른지 파악하기 위해 사용합니다.

두가지 접근이 있습니다.

### 캠페인의 성과 측정
하나는 특정 사용자군에 대해서 특정 기간 동안 특정한 경험을 주고 그들의 행동이 다른 비교군과 어떻게 달라지는지를 알아 보는 방법입니다. 화장품 매장의 사례처럼 팝업 스토어를 경험하도록 하게 하고 그 고객들이 다른 비교군들에 비해 어떤 다른 구매 행태를 보이는지 알아 보는 것입니다. 이 경우에는 우리가 준 경험이 고객들의 행동을 개선시키는지 알아 보고 싶은 거고 그 관찰을 통해서 우리가 설계한 경험이 긍정적인 효과를 불러 일으키는지 상관관계를 구하고 싶은 겁니다. 좋은 안이 나오면 해당 캠페인을 반복하거나 스케일을 키워서 더 좋은 결과를 얻기 위함입니다. 물론 우리의 기대와 달리 차이가 없거나 더 안좋은 결과가 발생하기도 합니다.

특정 이벤트의 효과를 측정하려고 하는데 A/B 테스트를 진행하기에 적합하지 않은 경우에도 사용합니다. 앞의 팝업 스토어 사례는 물리적인 환경의 제약으로 인해 A/B 테스트를 하기가 쉽지 않습니다. 따라서 코호트 분석을 통해서 팝업 스토어의 성과를 별도로 측정하고 비교했습니다. 해당 실험이 실행된 기간과 코호트의 기간이 일치해야 정확한 분석이 가능합니다. 예를 들어 팝업 스토어가 5일 동안 진행되었다면 일주일 짜리 코호트를 만들어서 분석해서는 안되겠죠? 요일 효과 등을 고려할 때 동일한 요일로 구성된 5일 짜리 코호트를 만들어서 서로 비교해야 합니다.

### 변화 감지
다른 하나는 우리가 보고자 하는 해상도의 수준을 미리 정하고 지속적으로 모니터링을 해서 변화를 알아 보기 위해 사용합니다. 예를 들어서 주별 코호트를 만들어서 매장의 성과를 측정하고 있다면 주 단위로 어떤 변화가 발생하는 경우 쉽게 파악이 가능할 겁니다. 더 높은 해상도를 원한다면 일 단위로 볼 수도 있겠죠? 만약 아무런 이벤트를 하지 않았는데 매장의 구매 전환율이 급격하게 떨어졌다면 반드시 그 원인을 찾아 봐야 합니다. 이렇게 코호트 분석은 우리가 해야 할 일을 알려 주는 actionable data를 제공합니다. 

### 사용자 획득
신규 사용자를 모집하는 작업을 User Acquisition, 줄여서 UA라고 부릅니다. 이 작업을 할 때 코호트 분석을 아주 많이 사용합니다. 페이스북이나 인스타그램처럼 특정 서비스를 통해 들어온 사람들을 **채널별 코호트**로 만들어서 비교하거나 또는 그보다 더 자세하게 **캠페인별 코호트**를 만들어서 비교하기도 합니다. 이 내용은 다른 영상에서 별도로 다루도록 하겠습니다.


## 코호트 분석을 할 때 주의해야 할 점

### 측정할 수 있는 단위로 캠페인을 실행하자.
캠페인을 실행할 때 실험이라고 생각하자. 그러면 측정할 수 있는 단위로 정확한 측정을 할 수 있게 하나의 실험만 진행하자. 빠르게 성장하고 싶다면 정확하게 실험을 하자. 

현재 사용하는 솔루션에서 지원하는 단위를 사용해야 한다. Google Analytics의 일 단위 또는 주 단위가 가능하기 때문에 ₩~~~₩~~~
일주일 단위 (GA는 일요일이 한 주의 시작이다.)로 캠페인을 실행하고 한 주 동안 결과를 분석한 후에 그 배움을 토대로 다음 캠페인을 실행하고 그 다음 주에 또 다른 실험을 진행하자. 일주일 단위로 캠페인 실행하면서 cohort 분석은 일 단위로 하면 결과 분석을 위해 일주일을 기다리지 않고 더 빨리 결과를 확인할 수 있다.

### 기다려야
코호트 분석을 할 때 흔히 하는 실수가 캠페인이 끝나자 마자 결과 분석 보고서를 작성하고 회의 한번하고 마무리 짓는 겁니다. 모든 회사의 경영진들이 캠페인을 하면 결과를 당장 보고 싶어합니다. 이해는 가지만 조심해야 할 점이 하나 있습니다. 코호트 분석을 통해서 얻은 결과가, 특정 이벤트의 효과가 아니라 그 밖의 외부효과 때문일 수 있습니다. 그래서 해당 이벤트가 끝나자 마자 바로 보고서를 작성해서 하는 건 지극히 위험합니다. 반드시 그 다음 코호트가 완성되기를 기다려서 해당 코호트와 비교를 한 후에 결론을 내야 합니다. 앞의 사례에서는 11월 4주차 코호트와 비교해야 하는거죠. 더 길게 보면 그 다음 달의 3주차 코호트인 12월 3주차 코호트와도 비교해 봐야 합니다. 결론적으로 누군가는 지속적으로 코호트를 모니터링해야 한다는 거죠.

이러다 보니 주 단위면 주 단위, 일 단위면 일 단위, 이렇게 동일한 해상도를 쭉 사용하는 게 좋습니다.

### 한번에 하나씩 
급하게 여러개의 캠페인을 돌려서 좋은 성과가 나온다고 해도 어느 캠페인 때문인지 알지 못하면 무슨 소용이냐? 분석 가능한 만큼 캠페인을 실행하자. 실험의 목적은 학습이지, 실험의 개수가 아니다.


## 실습 과제
간단 퀴즈:
남성/여성 등 2가지만 가지고 성별을 나눈다고 할 때 이 조건으로 코호트를 만들 수 있는 경우는 어떤 경우일까요?

**여러분의 스타트업에서 적합한 코호트는 무엇인가요? 해당 코호트로 어떤 데이터를 추가적으로 볼 수 있나요?
~~~~~~~~~ 찾아야 한다..
**

## Closing
이 영상이 도움이 되셨다면 좋아요와 구독 버튼을 눌러 주세요. 제가 다음 영상을 준비하는데 커다란 힘이 됩니다. 궁금하신 점이 있으면 코멘트로 남겨 주세요.

그럼 다음 시간에 뵐게요.