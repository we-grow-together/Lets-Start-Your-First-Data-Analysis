# 동일한 경험을 가진 사람들을 묶어서 분석하자. 코호트 분석, 이렇게 하면 된다!

## Hook
열심히 마케팅 캠페인을 기획하고 운영까지 했는데 효과를 제대로 측정하지 못해서 핀잔을 들은 경험이 있지 않으신가요? retention이 중요하다고는 하는데 매달 우리 서비스의 retention이 어떻게 변화하고 있는지 정확하게 알고 계신가요? 우리가 알고자 하는 데이터만을 골라내서 보다 정확한 비교할 수 있게 도와주는 코호트 분석에 대해서 알아 봅시다.

## Intro
안녕하세요, Dano입니다. 이번 시간에는 사용자 행동 데이터를 분석하고자 할 때 어김 없이 등장하는 코호트에 대해 알아 봅시다. 대부분의 경우 코호트란 단어를 처음 들으셨거나 듣기는 했는데 정화하게 무슨 뜻인지는 모르실 겁니다. 자, 복잡한 이야기는 다 빼고 바로 예시를 가지고 시작합시다.

## 다시 돌아온 번화가의 화장품 매장
지난 시간에 저희가 사례로 다뤘던 번화가의 화장품 매장으로 다시 돌아가 봅시다. 아직 안 보신 분은 화면 왼쪽 상단의 i 마크를 참조하세요.
그 사장님에게 연락이 왔습니다. 

"해외 화장품 브랜드에서 연락이 왔는데 팝업 스토어를 한번 해 보자고 합니다. 일단 저는 한번 해 보고 싶은데 결과를 데이터로 분석하고 싶습니다. 어떻게 해야 할까요? 도와 주세요."

사실 이런 요청을 받으면 첫번째 해야 하는 질문은 '팝업 스토어를 통해서 어떤 이득을 얻고자 하나요? 가장 좋은 결과가 나왔다고 가정했을 때 머리 속에 어떤 시나리오가 펼처지세요?' 이런 질문입니다. 그래야 우리가 원하는 결과를 얻었는지 확인하기 위해 어떤 숫자들을 확인해야 하는지 알 수 있기 때문입니다. 




자 데이터 분석을 위해서 우리가 해야 할 일은

11월 세번째 주에 팝업 스토어를 열고 다른 주의 매출과 비교해 보기로 했습니다. 

11월 두번째 주, 11월 네번째 주, (직전 주와 직후 주와 비교하기 위해서)
10월 세번째 주 (월간 효과가 영향을 주는지 확인하기 위해서)

이렇게 4개 주의 데이터를 이용해서 퍼널을 만들고 각각의 전환율을 비교해 봅시다.


팝업 스토어를 진행했던 주의 구매 전환율은 기존의 10 ~ 11%에 비해서 15%로 높습니다. 매출도 증가했다.

이렇게 특정 주의 고객들을 하나의 사용자 집단으로 보고 서로 비교 분석해서 

의미 있는 결과가 만들어졌는지를 확인하는 것입니다.


내방객의 수는 늘었다.
하지만 객단가가 많이 떨어졌다. 즉 기존 고객들과는 다른 사람들이 왔다. 매출은 10월 3주차와 비교해서 약간의 증가만 있었다. 

팝업 스토어를 통해서 인스타그램 팔로워 증가 등 소셜에서의 매장의 인지도를 높이고자 하는 게 아니라면 뚜렷한 이득이 보이지 않는다.

같은 기간 단위끼리 비교하니까 훨씬 더 쉽고 빠르게 구체적인 비교가 가능하죠?


## 코호트 분석이란?
방금 한 게 바로 코호트 분석입니다. 이제 코호트가 무엇인지에 대해 알아 봅시다.

이제 코호트에 대해서 배워 봅시다. 코호트는 일정 기간에 동일한 이벤트를 경험한 사용자군을 말하빈다.

앞서 화장품 매장의 사례에서는 앞문으로 들어왔다., 뒷문으로 들어왔다. 이 경험을 코호트를 나누는 기준으로 사용할 수 있습니다.

즉 우리가 앞문으로 들어온 내방객을 우리 고객으로 전환하고자 그렸던 퍼널은 특정 코호트의 퍼널입니다. 앞문으로 들어온 내방객들을 코호트 A라고 부르고 뒷문으로 들어온 내방객들을 코호트 B라고 부릅시다.


### 코호트 분석의 의미 
뭔가 특정한 경험을 공유한 2개 이상의 사용자군이 있고 그들의 사후 퍼포먼스를 비교하고자 한다.

앞서의 화장품 매장의 경우, 코호트 분석을 했기 때문에 광고비를 어디에 더 투자해야 하는지를 쉽게 판별할 수 있었습니다. 코호트 분석은 이렇게 ~~~~한 효용을 가집니다.

코호트는 차이를 분석하고자 만든다.
특정 경험을 한 사용자들이 어떤 차이를 보이는지

Prospective Cohort Study
Retrospective Cohort Study

## 코호트의 분석의 가치
당장 팝업 스토어를 열었을 때 방문한 고객들의 객단가가 낮지만 저들이 매달 1회씩 방문하는 충성도 높은 고객이라면 어떻게 될까요?
LTV가 훨씬 높은 거죠. 그러면 저 팝업 스토어는 분기별 1회나 한달에 한번 정도는 해 볼 가치가 있는 거겠죠?




UA에서의 코호트 분석은 특정 광고를 보고 들어온 사람들을 cohort by channel이라고 해서 분류한다. (물론 cohort by campaign일 수도 있다.)
AppsFlyer 같은 전문적인 attribution tracking 툴이 있어야 한다.




### 퍼널 분석 말고도
우리는 아직 배운 게 퍼널 분석 밖에 없어서 해당 코호트에 대해서 퍼널 분석, 매출 더하기 객단가 분석만 했습니다. 추가적으로 다른 분석을 하려고 한다면 팝업 스토어를 방문한 고객들을 대상으로 설문조사를 진행하고 그들에 대한 데이터를 분석해서 추가적인 분석도 할 수 있을 겁니다. 또는 어떤 상품을 주로 구매했는지, 구매 수량, 장바구니 크기 등에 대한 추가 분석도 가능하겠죠? 코호트 분석은 사용자군을 나눈다는 것이지 퍼널 분석에만 한정되는 것이 아니니 참고하세요.

재구매에까지 걸리는 시간, 재구매회수, 재구매율, LTV 등을 측정해서 분석할 수 있습니다.
리텐션을 추가로 분석한다든지 하는 게 가능합니다.

UA에서는 채널별 코호트



### 동일한 경험이 키포인트
'xx 초등학교 졸업생'은 cohort일까요? 50년 전통의 학교라면 30년 전의 졸업생과 작년 졸업생이 같은 경험을 공유할 리가 없겠죠? xx 초등학교의 2002년 졸업생'은 어떨까요? cohort라고 부르기에 적합합니다. 다만 여기서 잊지 말아야 할 점은 우리가 해당 연도의 졸업생과 다른 연도의 졸업생들 간의 비교하려고 할 때에만 저 집단은 cohort가 됩니다. 목적성 없이 나눈 집단을 cohort라고 불러서는 안됩니다.

이와 같이 코호트 안에 속한 사람들은 동일한 경험을 공유해야 합니다. 이 가정이 달라지면 코호트 분석의 의미가 사라집니다. 예를 들어, 팝업 스토어를 운영한 7일 동안 앞의 2일은 준비가 덜 되서 서비스가 엉망진창이어서 고객들의 불만이 높았고 나머지 5일은 문제를 해결해서 잘 운영했다면 2일짜리 코호트, 5일짜리 코호트를 나눠서 분석해야지, 그냥 통으로 7일짜리 코호트로 분석해서는 안되겠죠? 온라인 서비스의 경우 홈페이지를 오후 12시 점심시간에 개편해서 오전과 오후 사용자의 경험이 달라졌다면 같은 코호트로 묶어서는 안됩니다.

### 세그먼트와의 차이
세그먼트는 고객을 나눴다는 의미입니다. 같은 세그먼트에 속한 사람들은 하나 이상의 일정한 속성을 공유한다는 의미입니다. 예를 들어 신용카드로 결제한 고객을 찾고 싶다면 전체 구매 고객 중에서 신용카드로 결제한 사람과 그렇지 않은 사람을 나누는 것을 의미합니다. 물론 우리가 관심 있는 것은 신용카드로 결제한 고객들이지만 항상 나눠서 우리가 원하는 것을 구한다고 생각하시면 됩니다. 50만원 이상 구매한 고객에 대해 알아 보고 싶다면 마찬가지로 전체 구매 고객 중에서 50만원 이상 구매한 고객과 나머지 고객을 나눈다는 것을 의미합니다.

디지털 서비스에서는 주로 어떤 국가의 접속자들이 우리 서비스를 이용하는지를 분석할 때 국가별 또는 한국 vs 해외' 이렇게 세그먼트를 만듭니다. 이런 접속 국가와 같은 속성은 '동일한 경험'이라고 부를 수 없잖아요? 성별, 나이도 그렇죠. 그래서 demographic 데이터라고 하는 것들은 모두 세그먼트를 나누는 속성으로 많이 사용했습니다.

저는 머릿 속에서, 코호트는 '동일한 경험을 한 사람들끼리 묶었구나'라고 생각하고 세그먼트는 전체 고객을 '특정 기준으로 나눴구나'라고 생각합니다. 저는 이렇게 외웠습니다. 여러분들은 각자의 방법을 찾아 보세요.

팝업 스토어를 방문해서 구매한 고객을 결제 방법으로 구분한다면 현금 (상품권 포함), 신용카드, 기타 (포인트 결제 등) 등으로 구분할 수 있습니다. 이때 우리가 팝업 스토어를 운영한 주에 방문한 고객을 하나의 코호트로 만들면 이 코호트를 결제 방법에 따라 3개의 세그먼트로 나눠서 추가적인 분석을 할 수 있습니다. 또는 구매 금액에 따라 A,B,C,D 4개 등급으로 4개의 세그먼트를 만들 수도 있습니다. 이렇게 추가적으로 나눈 세그먼트들의 객단가를 살펴 보거나 재구매율을 비교해 보면 고객에 대해서 더 많은 정보를 얻을 수 있을 겁니다.

말하자면 세그먼트가 더 넓은 의미로, 코호트가 더 좁은 의미로 사용된다고 하룻 있습니다. 둘을 구분하지 않고 사용하는 이상한(?) 솔루션들도 있으니 참고하세요. 하지만 원칙적으로 코호트는 동일한 이벤트를 경험한 사람들의 집합이고 세그먼트는 하나 이상의 속성을 공유한 사람들의 집합입니다.

반대로 특정 세그먼트를 정의하고 해당 세그먼트를 코호트로 나눌 수도 있습니다. 지난 달 전체 고객 중에 신용카드로 결제한 사람들을 골라서 '신용카드 결제 고객'이라는 세그먼트를 정의합니다. 그런 다음 해당 세그먼트에 대해서 11월 주차별 코호트로 나눠서 볼 수도 있습니다. 11월에 신용카드로 결제한 고객 중 특정 주차에 방문해서 구매한 사람 (각각 11월 1주차, 2주차, 3주차, 4주차에 구매한 고객)들의 결제 금액이나 구매건수 등을 비교해 볼 수 있습니다.





## 코호트 차트 보는 법
첫번재 컬럼은 코호트의 리스트 (GA의 경우 웹사이트 최초 방문일자)

두번째 컬럼은 Week 0, 즉 코호트가 방문한 바로 그 주. 그러니 항상 100%
세번째 컬럼은 Week 1, 해당 코호트에 속한 사람이 그 다음 주에 방문한 경우에 이 컬럼에 표기한다. 전체 중에 몇 %가 왔는지를 표기한다.
네번재 컬럼은 Week 2, 해당 코호트에 속한 사람이 처음 방문한 주, 그 다음 다음 주에 방문한 경우 이 컬럼에 표기한다. 마찬가지로 전체 100% 중에 몇 %가 왔는지를 표기한다.

retention over time을 보여 준다.

이 그림은 방문에 대해서 써서 저런 그림이지만

저걸 재 구매로 하루 수도 있다.
첫번째 구매가 있은 달 이후에 몇 달 지나서 구매했는지 확인할 수 있다.



## 코호트가 현실에 오면...
'퍼널 분석의 기본' 영상에서 언급한 '퍼널 분석의 활용 2번째'가 바로 이에 해당합니다. 일자 코호트는 거의 모든 데이터 분석 툴에서 제공합니다.
1) 대개의 경우 별 의미가 없다.
2) 특정 이벤트를 특정 기간 동안 진행했는데 그 기간 동안의 유입 고객이 특정 이벤트 때문에 온 것인지 아니면 이벤트에 관심 없거나 이벤트를 모르고 온 것인지 구분하기 어려울 때에 해당 일자 cohort를 다른 cohort와 분석해서 말 그대로 대충 사용한다. 당연히 위험하겠죠? 가급적이면 귀인할 방법을 찾아서 구현하고 캠페인을 진행하는 게 좋습니다.
3) 주로 모니터링 용도로 사용한다. KPI (구매 전환율, 매출 증가 등)가 변화하면 그 때 무슨 일아 있었길래 값이 변했는지를 파악하기 위해 사후 분석을 할 때 사용합니다.


Google Analytics의 경우 사용자의 최초 방문일 기준으로 일별, 주별, 월별 단위의 코호트를 만들어서 보여 줍니다. 그래서 별도의 코호트 분석 시스템이 없다면 특정 일에 하나의 캠페인을 실행하고 해당 cohort와 다른 cohort를 비교하는 방법을 사용하면 해당 캠페인의 효과를 측정해 볼 수 있습니다. (일주일도 가능합ㄴ다.)

다만 이런 기성 제품들은 대개 주당 retention 분석 또는 매출 분석까지만 해 주기 때문에 심도 있는 분석은 어려울 수 있습니다. 대부분의 초기 스타트업은 거기까지 필요하지 않습니다.



### 코호트는 상관 관계를 보여줄 뿐.
위의 예에서 다른 주 단위 코호트처럼, 일 단위, 월 단위 코호트도 많이 사용합니다.

혹시 지난 '퍼널 분석의 기본' 영상에서 퍼널 분석의 활용 3번째'를 기억하시나요? '특정 사건의 임팩트를 측정'할 때 사용한다고 했습니다. 우리가 위의 사례에서 사용한 것도 이에 해당합니다. 그 때 '해석에 있어서 가장 많은 논쟁을 불러 일으킨다'고 했던 것도 기억하시나요? 그래서 가급적이면 A/B 테스트를 추천한다고 설명했었는데 이번 화장품 매장 사례의 경우 오프라인 매장이다 보니 A/B 테스트를 한다는 게 사실 상 불가능하기 때문에 어쩔 수 없습니다. 그래서 전후의 코호트와 비교하고 지난 달의 코호트까지 비교했습니다. 사실 문제는 결과가 조금 좋게 나왔을 때 해석이 어렵다는데 있습니다. 게다가 많은 경우 사람들은 '답정너'입니다. 주의합시다. 

이번에는 특정 이벤트를 1주일 동안 진행했기 때문에 해당 코호트가 특정 주의 코호트와 같아서 2,3번 케이스 모두에 해당합니다만 우리 목적은 팝업 스토어의 임팩트니까 3번에 해당한다고 봐야겠죠?

게다가 큰 회사에서는 여러개의 캠페인이 동시에 실행되고 있어서 어떤 캠페인이 얼마 만큼의 기여를 했는지 파악하기 어렵습니다.

이커머스에서의 경우 쿠폰 디스카운트나 특정 링크를 통해서 들어와야 구입할 수 있는 특별 상품 등이 가장 귀인하기 쉽습니다. 해당 쿠폰 사용 여부와 해당 상품의 구매 여부만 판별하면 되니까요.

### attribution
이 요인으로 이런 결과가 온 것으로 귀인한다는 의미입니다. 정확한 이유를 모르니까 생각해 볼 수 있는 원인 중에 하나를 골라서 이게 기여를 했다라고 정하는 겁니다. 코호트 분석의 문제가 이렇게 100% 어떤 요인 때문이다라는 것을 밝힐 수 없다는 점이 있습니다.

그럼 어떻게 해야 할까요? 반복적으로 실험을 진행해서 해당 결과를 검증하는 수 밖에 없습니다. 그리고 이 지점에서 바로 통계학이 도움을 줍니다. 하지만 우린 초보니까 어려운 건 또 스킵합니다. -_-



## 성장하고자 한다면 
캠페인을 실행할 때 실험이라고 생각하자. 그러면 측정할 수 있는 단위로 정확한 측정을 할 수 있게 하나의 실험만 진행하자. 빠르게 성장하고 싶다면 정확하게 실험을 하자. 급하게 여러개의 캠페인을 돌려서 좋은 성과가 나온다고 해도 어느 캠페인 때문인지 알지 못하면 무슨 소용이냐?

일주일 단위 (GA는 일요일이 한 주의 시작이다.)로 캠페인일 실행하고 한 주 동안 결과를 분석한 후에 그 배움을 토대로 다음 캠페인을 실행하고 그 다음 주에 또 다른 실험을 진행하자. 일주일 단위로 캠페인 실행하면서 cohort 분석은 일 단위로 하면 결과 분석을 위해 일주일을 기다리지 않고 더 빨리 결과를 확인할 수 있다.








## 실습 과제
간단 퀴즈:
남성/여성 등 2가지만 가지고 성별을 나눈다고 할 때 이 조건으로 코호트를 만들 수 있는 경우는 어떤 경우일까요?


## Closing
이 영상이 도움이 되셨다면 좋아요와 구독 버튼을 눌러 주세요. 제가 다음 영상을 준비하는데 커다란 힘이 됩니다. 궁금하신 점이 있으면 코멘트로 남겨 주세요.

그럼 다음 시간에 뵐게요.


//////////////////////

## 로그
로그를 미리 찍어야 한다.
(뺄까?) 로그의 중요성: 결과값만 가지고 있다면 분석 불가능
