# 코호트 분석, 이렇게 하면 된다!

## Hook

## Intro
안녕하세요, Dano입니다. 이번 시간에는 고객의 행동을 추적해서 데이터를 분석할 때 가장 먼저 사용하는 도구 중 하나인 퍼널에 대해 알아 봅시다. 뭔가 어렵게 들리죠? 자, 복잡한 이야기는 다 빼고 바로 예시를 가지고 시작합시다.

## 다시 돌아온 번화가의 화장품 매장
저번에 사례로 다뤘던 번화가의 화장품 매장으로 돌아가 봅시다. 아직 안 보신 분은 화면 왼쪽 상단의 링크를 참조하세요.
그 사장님에게 연락이 왔습니다. 

**(이슈) 매장에 뒷문을 냈는데 앞문과 뒷문에 홍보 예산을 어떻게 배분할지 고민 중이다.**

'아니 이게 무슨 소리야?' 그럼 저번에 분석할 때도 뒷문이 있었냐고 물어보니 다행히 그건 아니라고 합니다. '안도의 한숨'

자세히 살펴 봅시다.

### ?????
먼저 내방객을 앞문으로 들어온 사람과 뒷문으로 들어온 사람을 구분해야 합니다.

지난 한달 동안의 데이터를 살펴 봅시다. 내방객 20,000명 중에 앞문으로 들어온 사람이 15,000명, 뒷문으로 들어온 사람이 5,000명이라고 합시다.
우리 매장의 매출에 어느 사용자군이 더 기여를 하고 있나요?

잘 모르겠다구요? 네 맞습니다. 이 정보만으로는 알 수 없습니다.

그럼 그 다음으로 구매 고객 3,000명 중에 

1) 앞문으로 들어온 내방객 중에 구매 고객 수: 2,000명
2) 뒷문으로 들어온 내방객 중에 구매 고객 수: 1,000명

이 두 사용자군 중에서는 누가 우리 매장의 매출에 더 기여를 하고 있나요? 

맞습니다. 앞문으로 들어와서 구매를 한 고객들입니다.

질문을 약간 바꿔 볼게요. 이 두 사용자군 중에 어느 사용자군을 더 유치하는 게 유리할까요?


앞문으로 들어온 내방객, 앞문으로 들어온 내방객 중에 구매 고객 수
뒷문으로 들어온 내방객, 뒷문으로 들어온 내방객 중에 구매 고객 수


**단순화를 위해서 객단가를 고정합시다.
**

퍼널을 그려 봅시다.

2개의 사용자군을 구분하지 않고 퍼널을 그리면 우리가 궁금해 하는 질문에 답을 할 수 없겠죠?

나눠서 그려 봅시다.

1번째 퍼널은 앞문으로 들어온 내방객을 구매 고객으로 전환하고자 할 때 사용하는 퍼널이고 2번째 퍼널은 뒷문으로 들어온 내방객을 구매 고객으로 전환하고자 할 때 사용하는 퍼널입니다.




자 다시 데이터에 집중해서 데이터를 분석해 보면
앞문으로 들어오는 고객들에 비해 뒷문으로 들어오는 고객들의 구매 전환율이 6.7%나 높다는 걸 알 수 있습니다.

그리고 더 나아가서 뒷문의 경우 유동인구 대비 내방객의 비율이 2.5%로 앞문의 경우에 비해 절반에 불과하다는 것을 알 수 있습니다.

동일한 예산으로 고객을 유치한다면 어느 문쪽 유동인구를 대상으로 매장 입장을 유도하시겠어요?

물론 이것도 하나의 가설이고 실험을 통해 검증해야 하지. 이 데이터만 보고 '사장님, 지금 당장 가진 돈 다 털어서 뒷문 확장하시고 뒷문 유동 인구 대상으로 홍보하세요.'라고 하면 안됩니다. 하지만 대부분의 사장님들은 아무 것도 모르고 결론만 원하죠. 실험하자고 하면 싫어 합니다. 그래서 적은 비용만 들여서 할 수 있는 실험을 해야 합니다.

이야기를 해피 엔딩으로 맺어 봅시다. 알바 한명 고용해서 뒷문 쪽 유동인구 대상으로 전단지를 나눠줬더니 더 많은 내방객이 생겼고 내방객 기준 구매 전환율은 약간 떨어지긴 했지만 여전히 앞문보다 5%나 높았다고 합니다. 행복한 결말이죠? 



## Cohort란 무엇인가?
이제 코호트에 대해서 배워 봅시다. 코호트는 일정 기간에 동일한 이벤트를 경험한 사용자군을 말하빈다.

앞서 화장품 매장의 사례에서는 앞문으로 들어왔다., 뒷문으로 들어왔다. 이 경험을 코호트를 나누는 기준으로 사용할 수 있습니다.

즉 우리가 앞문으로 들어온 내방객을 우리 고객으로 전환하고자 그렸던 퍼널은 특정 코호트의 퍼널입니다. 앞문으로 들어온 내방객들을 코호트 A라고 부르고 뒷문으로 들어온 내방객들을 코호트 B라고 부릅시다.

### 코호트 분석의 의미 
뭔가 특정한 경험을 공유한 2개 이상의 사용자군이 있고 그들의 사후 퍼포먼스를 비교하고자 한다.

앞서의 화장품 매장의 경우, 코호트 분석을 했기 때문에 광고비를 어디에 더 투자해야 하는지를 쉽게 판별할 수 있었습니다. 코호트 분석은 이렇게 ~~~~한 효용을 가집니다.

Prospective Cohort Study
Retrospective Cohort Study


## 일자별 코호트
주로 서로 다른 일자 (같은 날에 매장을 방문한 고객, 동일 일자 내방객)의 고객군을 칭할 때 사용합니다.

단 매장의 구성이나 경험이 동일하다는 전제여야 합니다.

이상한 사람이 들어와서 난리를 피우는 통에 오전 영업을 망쳤다면 그 날의 사용자군을 하나의 코호트로 묶어서는 안되겠죠? 온라인 서비스의 경우 홈페이지를 오후 12시에 업그레이드해서 오전과 오후 사용자의 경험이 달라졌다면 같은 코호트로 묶어서는 안됩니다.


### 세그먼트와의 차이
세그먼트는 고객을 나눴다는 의미입니다. 주로 같은 세그먼트에 속한 사람들은 일정한 속성을 공유한다고 보시면 됩니다.

구매금액 500만원 이상인 고객: VIP 세그먼트
성별이나 지역 등으로 고객을 구분하는 것

세그먼트가 더 넓은 의미, 코호트가 더 좁은 의미



## 사후에 코호트 분석은 어렵다. (데이터 해상도 차원에서.. 뭉개진 데이터 복구는 불가능)
하나 생각해 볼 점은 이런 데이터를 수집하려면 사용자들의 행동을 트랙킹해야 합니다. 어떤 행동들을 어떻게 트랙킹해야 할까요?
앞문으로 들어온 사람의 수를 세고 뒷문으로 들어온 사람의 수를 세어야 합니다.
구매 고객들도 앞문으로 온 사람인지, 뒷문으로 온 사람인지 구별할 수 있어야 합니다.

어떻게 해야 할까요?

앞문, 뒷문에 알바를 고용해서 계수기를 가지고 내방객의 수를 셉니다.
구매 고객에게는 결제할 때 혹시 뒷문으로 들어 오셨는지 물어봅니다. 아니라고 하면 앞문으로 들어온 거고 왜냐고 물어보면 뒷문 이동량 조사를 하고 있다고 짧게 대답하면 됩니다.

만만치 않죠. 일주일 정도 하는 게 최선이 아닐까 합니다. ㅎ



로그를 미리 찍어야 한다.


# 낙서 2
팝업스토어
매장 전체를

남성/여성으로 코호트를 만들 수 있는 곳은

목욕탕이나 화장실

코호트는 차이를 분석하고자 만든다.
특정 경험을 한 사용자들이 어떤 차이를 보이는지

뒷문 입장은 특별한 경험은 아닐 거다
뒷문 코호트를 더 분석해서 새그먼트를 나눠보는게 필요하다




# 낙서
Cohort

2번째 데이터 분석

코호트

앞문/뒷문

일자별

(뺄까?) 로그의 중요성: 결과값만 가지고 있다면 분석 불가능

뒷문 유지 비용이 높다

보안요원
사건 사고가 많다a

앞뒷문 고객수 비교만 가지고 될까?

아니다

코호트 분석이 필요하다.

//////////////////////

## 로그
로그를 미리 찍어야 한다.
(뺄까?) 로그의 중요성: 결과값만 가지고 있다면 분석 불가능



## attribution
이 요인으로 이런 결과가 온 것으로 귀인한다는 의미입니다. 정확한 이유를 모르니까 생각해 볼 수 있는 원인 중에 하나를 골라서 이게 기여를 했다라고 정하는 겁니다. 코호트 분석의 문제가 이렇게 100% 어떤 요인 때문이다라는 것을 밝힐 수 없다는 점이 있습니다.

그럼 어떻게 해야 할까요? 반복적으로 실험을 진행해서 해당 결과를 검증하는 수 밖에 없습니다. 그리고 이 지점에서 바로 통계학이 도움을 줍니다. 하지만 우린 초보니까 어려운 건 또 스킵합니다. -_-



## 퍼널 분석 말고도
우리는 아직 배운 게 퍼널 분석 밖에 없어서 해당 코호트에 대해서 퍼널 분석, 매출 더하기 객단가 분석만 했습니다. 추가적으로 다른 분석을 하려고 한다면 팝업 스토어를 방문한 고객들을 대상으로 설문조사를 진행하고 그들에 대한 데이터를 분석해서 추가적인 분석도 할 수 있을 겁니다. 또는 어떤 상품을 주로 구매했는지, 구매 수량, 장바구니 크기 등에 대한 추가 분석도 가능하겠죠? 코호트 분석은 사용자군을 나눈다는 것이지 퍼널 분석에만 한정되는 것이 아니니 참고하세요.

재구매에까지 걸리는 시간, 재구매회수, 재구매율, LTV 등을 측정해서 분석할 수 있습니다.
리텐션을 추가로 분석한다든지 하는 게 가능합니다.

어떤 상품을 구매했는지

UA에서는 채널별 코호트 또는 캠페인별 코호트를 통해서



## 낙서
앞서 화장품 매장의 사례에서는 앞문으로 들어왔다., 뒷문으로 들어왔다. 이 경험을 코호트를 나누는 기준으로 사용할 수 있습니다.

즉 우리가 앞문으로 들어온 내방객을 우리 고객으로 전환하고자 그렸던 퍼널은 특정 코호트의 퍼널입니다. 앞문으로 들어온 내방객들을 코호트 A라고 부르고 뒷문으로 들어온 내방객들을 코호트 B라고 부릅시다.




## 낙서

2) 특정 이벤트를 특정 기간 동안 진행했는데 그 기간 동안의 유입 고객이 특정 이벤트 때문에 온 것인지 아니면 이벤트에 관심 없거나 이벤트를 모르고 온 것인지 구분하기 어려울 때에 해당 일자 cohort를 다른 cohort와 분석해서 말 그대로 대충 사용한다. 당연히 위험하겠죠? 가급적이면 귀인할 방법을 찾아서 구현하고 캠페인을 진행하는 게 좋습니다.
3) 주로 모니터링 용도로 사용한다. KPI (구매 전환율, 매출 증가 등)가 변화하면 그 때 무슨 일아 있었길래 값이 변했는지를 파악하기 위해 사후 분석을 할 때 사용합니다.


## 낙서

앞서의 화장품 매장의 경우, 코호트 분석을 했기 때문에 광고비를 어디에 더 투자해야 하는지를 쉽게 판별할 수 있었습니다. 코호트 분석은 이렇게 ~~~~한 효용을 가집니다.

특정 경험을 한 사용자들이 어떤 차이를 보이는지



### 코호트는 상관 관계를 보여줄 뿐.
~~혹시 지난 '퍼널 분석의 기본' 영상에서 퍼널 분석의 활용 3번째'를 기억하시나요? '특정 사건의 임팩트를 측정'할 때 사용한다고 했습니다. 우리가 위의 사례에서 사용한 것도 이에 해당합니다. 그 때 '해석에 있어서 가장 많은 논쟁을 불러 일으킨다'고 했던 것도 기억하시나요? 그래서 가급적이면 A/B 테스트를 추천한다고 설명했었는데 이번 화장품 매장 사례의 경우 오프라인 매장이다 보니 A/B 테스트를 한다는 게 사실 상 불가능하기 때문에 어쩔 수 없습니다. 그래서 전후의 코호트와 비교하고 지난 달의 코호트까지 비교했습니다. 사실 문제는 결과가 조금 좋게 나왔을 때 해석이 어렵다는데 있습니다. 게다가 많은 경우 사람들은 '답정너'입니다. 주의합시다. 
~~

~~이번에는 특정 이벤트를 1주일 동안 진행했기 때문에 해당 코호트가 특정 주의 코호트와 같아서 2,3번 케이스 모두에 해당합니다만 우리 목적은 팝업 스토어의 임팩트니까 3번에 해당한다고 봐야겠죠?
~~
게다가 큰 회사에서는 여러개의 캠페인이 동시에 실행되고 있어서 어떤 캠페인이 얼마 만큼의 기여를 했는지 파악하기 어렵습니다.

이커머스에서의 경우 쿠폰 디스카운트나 특정 링크를 통해서 들어와야 구입할 수 있는 특별 상품 등이 가장 귀인하기 쉽습니다. 해당 쿠폰 사용 여부와 해당 상품의 구매 여부만 판별하면 되니까요.


